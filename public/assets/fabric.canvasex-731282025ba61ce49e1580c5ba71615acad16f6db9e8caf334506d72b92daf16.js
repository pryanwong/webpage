!function(){"use strict";var t=fabric.util.addListener,e=fabric.util.removeListener;fabric.CanvasEx=fabric.util.createClass(fabric.Canvas,{tapholdThreshold:2e3,_bindEvents:function(){var t=this;t.callSuper("_bindEvents"),t._onDoubleClick=t._onDoubleClick.bind(t),t._onTapHold=t._onTapHold.bind(t)},_onDoubleClick:function(t){var e=this,i=e.findTarget(t);e.fire("mouse:dblclick",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("object:dblclick",{e:t})},_onTapHold:function(t){var e=this,i=e.findTarget(t);e.fire("touch:taphold",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("taphold",{e:t}),"touchend"===t.type&&null!=e.touchStartTimer&&clearTimeout(e.touchStartTimer)},_onMouseDown:function(t){var e=this;if(e.callSuper("_onMouseDown",t),"touchstart"===t.type){var i=setTimeout(function(){e._onTapHold(t),e.isLongTap=!0},e.tapholdThreshold);return void(e.touchStartTimer=i)}if(3===t.which){var o=this.findTarget(t);e.fire("mouse:down",{target:o,e:t}),o&&!e.isDrawingMode&&o.fire("mousedown",{e:t})}},_onMouseUp:function(t){var e=this;if(e.callSuper("_onMouseUp",t),"touchend"===t.type){null!=e.touchStartTimer&&clearTimeout(e.touchStartTimer),e.isLongTap&&(e._onLongTapEnd(t),e.isLongTap=!1);var i=(new Date).getTime(),o=e.lastTouch||i+1,r=i-o;return void(300>r&&r>0?(e.lastTouch=null,e._onDoubleTap(t)):e.lastTouch=i)}},_onDoubleTap:function(t){var e=this,i=e.findTarget(t);e.fire("touch:doubletap",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("object:doubletap",{e:t})},_onLongTapEnd:function(t){var e=this,i=e.findTarget(t);e.fire("touch:longtapend",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("object:longtapend",{e:t})},_initEventListeners:function(){var e=this;e.callSuper("_initEventListeners"),t(e.upperCanvasEl,"dblclick",e._onDoubleClick)},removeListeners:function(){var t=this;t.callSuper("removeListeners"),e(t.upperCanvasEl,"dblclick",t._onDoubleClick)}})}(),fabric.CustomImage=fabric.util.createClass(fabric.Image,{type:"custom-image",initialize:function(t,e){this.callSuper("initialize",t,e),e&&this.set("model",e.model),e&&this.set("config",e.config),e&&this.set("origloc",e.origloc),e&&this.set("price",e.price),e&&this.set("configdbid",e.configdbid)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{config:this.config,price:this.price,model:this.model,origloc:this.origloc,configdbid:this.configdbid})},setConfig:function(t){this.config=t,canvas.trigger("custom-image:textChange")},_render:function(t){this.callSuper("_render",t),"undefined"!=this.config&&(log.trace(t),t.font="12px Helvetica",t.fillStyle="#333",textwidth=t.measureText(this.config).width,t.fillText(this.config,-textwidth/2,this.height/2+10))}}),fabric.CustomImage.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){e&&e(new fabric.CustomImage(i,t))})},fabric.CustomImage.async=!0,fabric.Customline=fabric.util.createClass(fabric.Line,{type:"customline",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e),e&&this.set("objId",e.objId),e&&this.set("cone",e.cone),e&&this.set("ctwo",e.ctwo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{objId:this.objId,cone:this.cone,ctwo:this.ctwo})},setObjId:function(t){this.objId=t},getObjId:function(){return this.objId},setCone:function(t){this.cone=t},setCtwo:function(t){this.ctwo=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Customline.fromObject=function(t){return new fabric.Customline([t.x1,t.y1,t.x2,t.y2],t)},fabric.Customline.async=!1,fabric.Circlezero=fabric.util.createClass(fabric.Circle,{type:"circlezero",initialize:function(t,e){this.callSuper("initialize",t,e),e&&this.set("belongsTo",e.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(t){this.belongsTo=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Circlezero.fromObject=function(t){return new fabric.Circlezero(t)},fabric.Circlezero.async=!1,fabric.Circleone=fabric.util.createClass(fabric.Circle,{type:"circleone",initialize:function(t,e){this.callSuper("initialize",t,e),e&&this.set("belongsTo",e.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(t){this.belongsTo=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Circleone.fromObject=function(t){return new fabric.Circleone(t)},fabric.Circleone.async=!1,fabric.Conearrow=fabric.util.createClass(fabric.Circle,{type:"conearrow",initialize:function(t,e){this.callSuper("initialize",t,e),e&&this.set("belongsTo",e.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(t){this.belongsTo=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Conearrow.fromObject=function(t){return new fabric.Conearrow(t)},fabric.Conearrow.async=!1,fabric.Carrow=fabric.util.createClass(fabric.Triangle,{type:"carrow",initialize:function(t,e){this.callSuper("initialize",t,e),e&&this.set("belongsTo",e.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(t){this.belongsTo=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Carrow.fromObject=function(t){return new fabric.Carrow(t)},fabric.Carrow.async=!1,fabric.Carrowtwo=fabric.util.createClass(fabric.Triangle,{type:"carrowtwo",initialize:function(t,e){this.callSuper("initialize",t,e),e&&this.set("belongsTo",e.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(t){this.belongsTo=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Carrowtwo.fromObject=function(t){return new fabric.Carrowtwo(t)},fabric.Carrowtwo.async=!1,fabric.Customlinearrow=fabric.util.createClass(fabric.Line,{type:"customlinearrow",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e),e&&this.set("objId",e.objId),e&&this.set("carrow",e.carrow),e&&this.set("conearrow",e.conearrow)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{objId:this.objId,carrow:this.carrow,conearrow:this.conearrow})},setObjId:function(t){this.objId=t},getObjId:function(){return this.objId},setCarrow:function(t){this.carrow=t},setConearrow:function(t){this.conearrow=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Customlinearrow.fromObject=function(t){return new fabric.Customlinearrow([t.x1,t.y1,t.x2,t.y2],t)},fabric.Customlinearrow.async=!1,fabric.Customlinetwoarrow=fabric.util.createClass(fabric.Line,{type:"customlinetwoarrow",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e),e&&this.set("objId",e.objId),e&&this.set("carrow",e.carrow),e&&this.set("carrowtwo",e.carrowtwo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{objId:this.objId,carrow:this.carrow,carrowtwo:this.carrowtwo})},setObjId:function(t){this.objId=t},getObjId:function(){return this.objId},setCarrow:function(t){this.carrow=t},setCarrowtwo:function(t){this.carrowtwo=t},_render:function(t){this.callSuper("_render",t)}}),fabric.Customlinetwoarrow.fromObject=function(t){return new fabric.Customlinearrow([t.x1,t.y1,t.x2,t.y2],t)},fabric.Customlinetwoarrow.async=!1;
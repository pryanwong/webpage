function loadConfigScreen(e,n,t){if(jsondata=e,log.info("Entering loadConfigScreen"),log.trace("jsondata: ",jsondata),"Data Not Found"==jsondata.error)document.getElementById("data").innerHTML+="<br>"+jsondata.error;else{jsondataprice=JSON.parse(jsondata.price),version=JSON.parse(jsondata.version);var o=document.createElement("div");o.className="form-group form-group-sm";var a=document.createElement("div");for(a.className="control-label col-sm-3",a.innerHTML+=jsondata.name,o.appendChild(a),document.getElementById("data").appendChild(o),i=0;i<jsondataprice.product.options.length;i++){var r=document.createElement("div");r.className="form-group form-group-sm";var c=document.createElement("label");c.className="control-label col-sm-3",c.innerHTML+=jsondataprice.product.options[i].opname,r.appendChild(c);var d=document.createElement("div");d.className="control-label col-sm-9";var s="",l="select"+i;for(s='<select class="form-control input-sm" id="'+l+'">',j=0;j<jsondataprice.product.options[i].selections.length;j++)s+='<option value=\'{"code":"',s+=jsondataprice.product.options[i].selections[j].code,s+='","price":"',s+=jsondataprice.product.options[i].selections[j].price,s+="\"}'",n&&jsondataprice.product.options[i].selections[j].code==t[i+1]&&(s+=' selected="selected" '),s+=">",s+=jsondataprice.product.options[i].selections[j].description,s+="</option>";s+="</select>",d.innerHTML+=s,r.appendChild(d),document.getElementById("data").appendChild(r)}var r=document.createElement("div");r.className="form-group form-group-sm";var c=document.createElement("label");c.className="control-label col-sm-3",c.innerHTML+="Configuration: ",r.appendChild(c);var p=document.createElement("div");p.className="col-sm-9 input-sm";var d=document.createElement("p");d.className="pull-left",d.id="prodconfig",p.appendChild(d),r.appendChild(p),document.getElementById("data").appendChild(r);var m=document.createElement("div");m.className="form-group form-group-sm";var c=document.createElement("label");c.className="control-label col-sm-3",c.innerHTML+="List Price: ",m.appendChild(c);var p=document.createElement("div");p.className="col-sm-9 input-sm";var d=document.createElement("p");d.className="pull-left",d.id="price",p.appendChild(d),m.appendChild(p),document.getElementById("data").appendChild(m);var g=document.createElement("div");g.innerHTML+="Price Version: ";var u=document.createElement("label");u.setAttribute("id","priceversion"),u.innerHTML+=version,g.style.visibility="hidden",g.appendChild(u),document.getElementById("data").appendChild(g);var v=canvas.item(searchId).config;for(configString(jsondata,searchId),version!=canvas.item(searchId).priceversion&&("undefined"==v&&0==jsondataprice.product.options.length?changeVersion(version,searchId):0==jsondataprice.product.options.length?(document.getElementById("price").innerHTML+="- Please Note Price Has been Updated",d.style.color="red",changeVersion(version,searchId)):"undefined"==v?(document.getElementById("price").innerHTML+="- Please Configure",d.style.color="blue",changeVersion(version,searchId)):(document.getElementById("price").innerHTML+="- Invalid Price, Please Adjust Configuration",d.style.color="red")),log.debug("Adding Listeners: Before For Loop"),i=0;i<jsondataprice.product.options.length;i++){var l="select"+i;document.getElementById(l).onchange=function(){var e=this.selectedIndex,n=this.children[e].innerHTML.trim();log.trace(n),configString(jsondata,searchId),changeVersion(version,searchId),version==canvas.item(searchId).priceversion&&(d.style.color="black")}}}$("#gifspinner").fadeOut(400),log.info("Leaving loadConfigScreen")}function configString(e,n){log.info("Entering configString"),log.trace("configString:jasontext",e),jsondataprice=JSON.parse(e.price),log.trace("configString:jsondataprice",jsondataprice);var t=jsondataprice.product.name,o=jsondataprice.product.basePrice;for(i=0;i<jsondataprice.product.options.length;i++){selectid="select"+i;var a=document.getElementById(selectid).selectedIndex;t+="-";var r=JSON.parse(document.getElementById(selectid).children[a].value);t+=r.code,o=parseInt(o)+parseInt(r.price)}document.getElementById("prodconfig").innerHTML=t,document.getElementById("price").innerHTML=o,canvas.item(n).setConfig(document.getElementById("prodconfig").innerHTML),canvas.item(n).price=document.getElementById("price").innerHTML,canvas.renderAll(),log.info("Leaving configString")}function changeVersion(e,n){canvas.item(n).priceversion=e,canvas.renderAll()}
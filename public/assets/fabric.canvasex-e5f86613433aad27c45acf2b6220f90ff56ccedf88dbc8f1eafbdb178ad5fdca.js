!function(){"use strict";var e=fabric.util.addListener,i=fabric.util.removeListener;fabric.CanvasEx=fabric.util.createClass(fabric.Canvas,{tapholdThreshold:2e3,_bindEvents:function(){var e=this;e.callSuper("_bindEvents"),e._onDoubleClick=e._onDoubleClick.bind(e),e._onTapHold=e._onTapHold.bind(e)},_onDoubleClick:function(e){var i=this,t=i.findTarget(e);i.fire("mouse:dblclick",{target:t,e:e}),t&&!i.isDrawingMode&&t.fire("object:dblclick",{e:e})},_onTapHold:function(e){var i=this,t=i.findTarget(e);i.fire("touch:taphold",{target:t,e:e}),t&&!i.isDrawingMode&&t.fire("taphold",{e:e}),"touchend"===e.type&&null!=i.touchStartTimer&&clearTimeout(i.touchStartTimer)},_onMouseDown:function(e){var i=this;if(i.callSuper("_onMouseDown",e),"touchstart"===e.type){var t=setTimeout(function(){i._onTapHold(e),i.isLongTap=!0},i.tapholdThreshold);return void(i.touchStartTimer=t)}if(3===e.which){var o=this.findTarget(e);i.fire("mouse:down",{target:o,e:e}),o&&!i.isDrawingMode&&o.fire("mousedown",{e:e})}},_onMouseUp:function(e){var i=this;if(i.callSuper("_onMouseUp",e),"touchend"===e.type){null!=i.touchStartTimer&&clearTimeout(i.touchStartTimer),i.isLongTap&&(i._onLongTapEnd(e),i.isLongTap=!1);var t=(new Date).getTime(),o=i.lastTouch||t+1,n=t-o;return void(300>n&&n>0?(i.lastTouch=null,i._onDoubleTap(e)):i.lastTouch=t)}},_onDoubleTap:function(e){var i=this,t=i.findTarget(e);i.fire("touch:doubletap",{target:t,e:e}),t&&!i.isDrawingMode&&t.fire("object:doubletap",{e:e})},_onLongTapEnd:function(e){var i=this,t=i.findTarget(e);i.fire("touch:longtapend",{target:t,e:e}),t&&!i.isDrawingMode&&t.fire("object:longtapend",{e:e})},_initEventListeners:function(){var i=this;i.callSuper("_initEventListeners"),e(i.upperCanvasEl,"dblclick",i._onDoubleClick)},removeListeners:function(){var e=this;e.callSuper("removeListeners"),i(e.upperCanvasEl,"dblclick",e._onDoubleClick)}})}(),fabric.CustomImage=fabric.util.createClass(fabric.Image,{type:"custom-image",initialize:function(e,i){this.callSuper("initialize",e,i),i&&this.set("model",i.model),i&&this.set("config",i.config),i&&this.set("origloc",i.origloc),i&&this.set("price",i.price),i&&this.set("configdbid",i.configdbid)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{config:this.config,price:this.price,model:this.model,origloc:this.origloc,configdbid:this.configdbid})},setConfig:function(e){this.config=e,canvas.trigger("custom-image:textChange")},_render:function(e){this.callSuper("_render",e),"undefined"!=this.config&&(log.trace(e),e.font="12px Helvetica",e.fillStyle="#333",textwidth=e.measureText(this.config).width,e.fillText(this.config,-textwidth/2,this.height/2+10))}}),fabric.CustomImage.fromObject=function(e,i){fabric.util.loadImage(e.src,function(t){i&&i(new fabric.CustomImage(t,e))})},fabric.CustomImage.async=!0,fabric.Customline=fabric.util.createClass(fabric.Line,{type:"customline",initialize:function(e,i){i||(i={}),this.callSuper("initialize",e,i),i&&this.set("objId",i.objId),i&&this.set("cone",i.cone),i&&this.set("ctwo",i.ctwo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{objId:this.objId,cone:this.cone,ctwo:this.ctwo})},setObjId:function(e){this.objId=e},getObjId:function(){return this.objId},setCone:function(e){this.cone=e},setCtwo:function(e){this.ctwo=e},_render:function(e){this.callSuper("_render",e)}}),fabric.Customline.fromObject=function(e){return new fabric.Customline([e.x1,e.y1,e.x2,e.y2],e)},fabric.Customline.async=!1,fabric.Circlezero=fabric.util.createClass(fabric.Circle,{type:"circlezero",initialize:function(e,i){this.callSuper("initialize",e,i),i&&this.set("belongsTo",i.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(e){this.belongsTo=e},_render:function(e){this.callSuper("_render",e)}}),fabric.Circlezero.fromObject=function(e){return new fabric.Circlezero(e)},fabric.Circlezero.async=!1,fabric.Circleone=fabric.util.createClass(fabric.Circle,{type:"circleone",initialize:function(e,i){this.callSuper("initialize",e,i),i&&this.set("belongsTo",i.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(e){this.belongsTo=e},_render:function(e){this.callSuper("_render",e)}}),fabric.Circleone.fromObject=function(e){return new fabric.Circleone(e)},fabric.Circleone.async=!1,fabric.Conearrow=fabric.util.createClass(fabric.Circle,{type:"conearrow",initialize:function(e,i){this.callSuper("initialize",e,i),i&&this.set("belongsTo",i.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(e){this.belongsTo=e},_render:function(e){this.callSuper("_render",e)}}),fabric.Conearrow.fromObject=function(e){return new fabric.Conearrow(e)},fabric.Conearrow.async=!1,fabric.Carrow=fabric.util.createClass(fabric.Triangle,{type:"carrow",initialize:function(e,i){this.callSuper("initialize",e,i),i&&this.set("belongsTo",i.belongsTo)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{belongsTo:this.belongsTo})},setBelongsTo:function(e){this.belongsTo=e},_render:function(e){this.callSuper("_render",e)}}),fabric.Carrow.fromObject=function(e){return new fabric.Carrow(e)},fabric.Carrow.async=!1,fabric.Customlinearrow=fabric.util.createClass(fabric.Line,{type:"customlinearrow",initialize:function(e,i){i||(i={}),this.callSuper("initialize",e,i),i&&this.set("objId",i.objId),i&&this.set("carrow",i.carrow),i&&this.set("conearrow",i.conearrow)},toObject:function(){return fabric.util.object.extend(this.callSuper("toObject"),{objId:this.objId,carrow:this.carrow,conearrow:this.conearrow})},setObjId:function(e){this.objId=e},getObjId:function(){return this.objId},setCarrow:function(e){this.carrow=e},setConearrow:function(e){this.conearrow=e},_render:function(e){this.callSuper("_render",e)}}),fabric.Customlinearrow.fromObject=function(e){return new fabric.Customlinearrow([e.x1,e.y1,e.x2,e.y2],e)},fabric.Customlinearrow.async=!1;
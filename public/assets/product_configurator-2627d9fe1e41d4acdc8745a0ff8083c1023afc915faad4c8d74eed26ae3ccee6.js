function configuratorProduct(e,n,o){log.info("Entering configuratorProduct"),popup=window.open("/companies/"+n+"/prices/"+e+"/productconfig.html?searchId="+o,"Popup","width=300,height=500"),popup.focus(),log.info("Leaving configuratorProduct")}function loadConfigScreen(e,n,o){if(jsondata=e,log.info("Entering loadConfigScreen"),log.trace("jsondata: ",jsondata),"Data Not Found"==jsondata.error)document.getElementById("data").innerHTML+="<br>"+jsondata.error;else{jsondataprice=JSON.parse(jsondata.price);var t=document.createElement("div");t.className="form-group form-group-sm";var a=document.createElement("div");for(a.className="control-label col-sm-3",a.innerHTML+=jsondata.name,t.appendChild(a),document.getElementById("data").appendChild(t),i=0;i<jsondataprice.product.options.length;i++){var c=document.createElement("div");c.className="form-group form-group-sm";var r=document.createElement("label");r.className="control-label col-sm-3",r.innerHTML+=jsondataprice.product.options[i].opname,c.appendChild(r);var d=document.createElement("div");d.className="control-label col-sm-9";var l="",s="select"+i;for(l='<select class="form-control input-sm" id="'+s+'">',j=0;j<jsondataprice.product.options[i].selections.length;j++)l+='<option value=\'{"code":"',l+=jsondataprice.product.options[i].selections[j].code,l+='","price":"',l+=jsondataprice.product.options[i].selections[j].price,l+="\"}'",n&&jsondataprice.product.options[i].selections[j].code==o[i+1]&&(l+=' selected="selected" '),l+=">",l+=jsondataprice.product.options[i].selections[j].description,l+="</option>";l+="</select>",d.innerHTML+=l,c.appendChild(d),document.getElementById("data").appendChild(c)}var c=document.createElement("div");c.className="form-group form-group-sm";var r=document.createElement("label");r.className="control-label col-sm-3",r.innerHTML+="Configuration: ",c.appendChild(r);var p=document.createElement("div");p.className="col-sm-9 input-sm";var d=document.createElement("p");d.className="pull-left",d.id="prodconfig",p.appendChild(d),c.appendChild(p),document.getElementById("data").appendChild(c);var m=document.createElement("div");m.className="form-group form-group-sm";var r=document.createElement("label");r.className="control-label col-sm-3",r.innerHTML+="List Price: ",m.appendChild(r);var p=document.createElement("div");p.className="col-sm-9 input-sm";var d=document.createElement("p");for(d.className="pull-left",d.id="price",p.appendChild(d),m.appendChild(p),document.getElementById("data").appendChild(m),configString(jsondata,searchId),log.debug("Adding Listeners: Before For Loop"),i=0;i<jsondataprice.product.options.length;i++){var s="select"+i;document.getElementById(s).onchange=function(){var e=this.selectedIndex,n=this.children[e].innerHTML.trim();log.trace(n),configString(jsondata,searchId)}}}$("#gifspinner").fadeOut(400),log.info("Leaving loadConfigScreen")}function configString(e,n){log.info("Entering configString"),log.trace("configString:jasontext",e),jsondataprice=JSON.parse(e.price),log.trace("configString:jsondataprice",jsondataprice);var o=jsondataprice.product.name,t=jsondataprice.product.basePrice;for(i=0;i<jsondataprice.product.options.length;i++){selectid="select"+i;var a=document.getElementById(selectid).selectedIndex;o+="-";var c=JSON.parse(document.getElementById(selectid).children[a].value);o+=c.code,t=parseInt(t)+parseInt(c.price)}document.getElementById("prodconfig").innerHTML=o,document.getElementById("price").innerHTML=t,canvas.item(n).setConfig(document.getElementById("prodconfig").innerHTML),canvas.item(n).price=document.getElementById("price").innerHTML,canvas.renderAll(),log.info("Leaving configString")}var popup;
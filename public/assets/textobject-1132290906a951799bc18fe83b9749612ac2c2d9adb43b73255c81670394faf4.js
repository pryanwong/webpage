var textobject=function(){};textobject.textDown=function(e){log.info("Entering textDown"),""!=handler&&document.removeEventListener("contextmenu",handler),activeObjectVal&&(activeObject=!0),3==e.e.which&&(handler=function(e){if(0==contextmenuon&&1==activeObject){e.preventDefault();var n=["Delete Text","Change Color","Send Backward","Send To Back","Bring Forward","Bring To Front"];menus(n,e),$('a:contains("Delete")').click(function(){log.debug("textDown: In Delete"),activeObjectVal=canvas.getActiveObject(),log.trace(activeObjectVal),canvas.remove(activeObjectVal),$("#contextMenu").remove(),contextmenuon=!1,activeObject=!1}),$('a:contains("Change Color")').click(function(){activateColorPicker(e),$("#contextMenu").remove(),contextmenuon=!1,activeObject=!1}),$('a:contains("Send Backward")').click(function(){sendBackward()}),$('a:contains("Send To Back")').click(function(){sendToBack()}),$('a:contains("Bring Forward")').click(function(){bringFoward()}),$('a:contains("Bring To Front")').click(function(){bringToFront()}),contextmenuon=!0}}),document.addEventListener("contextmenu",handler,!1),log.info("Leaving textDown")};